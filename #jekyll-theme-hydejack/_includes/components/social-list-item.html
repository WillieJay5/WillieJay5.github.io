{% assign platform = include.platform | downcase %}
{% assign username = include.username %}

{% if username.size > 0 %}
  {% assign data_social = site.data.social[platform] | default:site.data_social[platform] %}

  {% assign name = data_social.name | default:include.platform %}
  {% assign icon = data_social.icon | default:'icon-link' %}
  {% assign app = data_social.append %}
  {% assign prep = data_social.prepend %}

  {% unless data_social %}
    {% if platform == "email" %}
      {% assign name = "Email" %}
      {% assign icon = "icon-mail" %}
      {% assign prep = "mailto:" %}
    {% elsif platform == "twitter" %}
      {% assign name = "Twitter" %}
      {% assign icon = "icon-twitter" %}
      {% assign prep = "https://twitter.com/" %}
    {% elsif platform == "github" %}
      {% assign name = "GitHub" %}
      {% assign icon = "icon-github" %}
      {% assign prep = "https://github.com/" %}
    {% endif %}
  {% endunless %}

  {% if username contains "//" or username contains "mailto:" %}
    {% assign url = username %}
  {% else %}
    {% assign url = username | prepend:prep | append:app %}
  {% endif %}

  {% if platform == "tryhackme" %}
    <li>
      <a href="https://tryhackme.com/p/{{ username }}" title="TryHackMe" class="no-mark-external">
        <svg viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg" class="icon-tryhackme-svg" aria-label="TryHackMe">
          <defs>
            <mask id="mask-tryhackme" maskUnits="userSpaceOnUse">
              <rect width="24" height="24" fill="white"/>
                <g transform="translate(0.5, 0.5)">
                  <path fill="black" d="M10.705 0C7.54 0 ... Z"/>
                </g>
            </mask>
          </defs>
          <rect width="24" height="24" fill="white" rx="4" mask="url(#mask-tryhackme)" />
        </svg>
        <span class="sr-only">TryHackMe</span>
      </a>
    </li>
  {% else %}
    <li>
      <a href="{{ url }}" title="{{ name }}" class="no-mark-external">
        <span class="{{ icon }}"></span>
        <span class="sr-only">{{ name }}</span>
      </a>
    </li>
  {% endif %}
{% endif %}